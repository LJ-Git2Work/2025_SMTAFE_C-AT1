<UserControl x:Class="Sensing4U_MVP.Views.ControlPanel"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
			 xmlns:local="clr-namespace:Sensing4U_MVP.Views"
			 xmlns:Services="clr-namespace:Sensing4U_MVP.Services"
			 xmlns:Models="clr-namespace:Sensing4U_MVP.Models"
			 mc:Ignorable="d" 
			 d:DesignHeight="450" d:DesignWidth="150">

    <UserControl.Resources>
        <Services:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
        <Models:SortMode x:Key="SortMode">Label</Models:SortMode>
    </UserControl.Resources>

    <Grid Background="LightGray">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Upper and Lower bound -->
        <Border Grid.Row="0" Background="White"  BorderBrush="Gray" BorderThickness="1" Margin="5,10,5,5">
            <StackPanel Orientation="Horizontal" Margin="5" Background="White">
                <TextBlock Text="Min" FontSize="12" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <TextBox Text="{Binding LowerBound, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Delay=500}" MinWidth="35" Margin="0,0,5,0"/>
                <TextBlock Text="Max" FontSize="12" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <TextBox Text="{Binding UpperBound, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Delay=500}" MinWidth="35" Margin="0,0,5,0"/>
            </StackPanel>
        </Border>

        <!-- Sort Mode Selection -->
        <Border Grid.Row="1" Background="White" BorderBrush="Gray" BorderThickness="1" Margin="5">
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Text="Sort/Search By" FontSize="12" FontWeight="Bold" Margin="0,0,0,5"/>

                <RadioButton Content="Value" GroupName="SortMode" Margin="0,2" 
                             IsChecked="{Binding SelectedSortMode,Converter={StaticResource EnumToBooleanConverter},
										ConverterParameter={x:Static Models:SortMode.Value}}" />

                <RadioButton Content="Label" GroupName="SortMode" Margin="0,2" 
                             IsChecked="{Binding SelectedSortMode,Converter={StaticResource EnumToBooleanConverter},
										ConverterParameter={x:Static Models:SortMode.Label}}" />

                <RadioButton Content="Timestamp" GroupName="SortMode" Margin="0,2" 
                             IsChecked="{Binding SelectedSortMode,Converter={StaticResource EnumToBooleanConverter},
										ConverterParameter={x:Static Models:SortMode.Timestamp}}" />

                <Button Content="Apply Sort" Command="{Binding ApplySortCommand}" Margin="0,5,0,0"/>

            </StackPanel>
        </Border>

        <!-- Search -->
        <Border Grid.Row="2" Background="White" BorderBrush="Gray" BorderThickness="1" Margin="5">
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Text="{Binding SearchMode}" FontSize="12" Margin="0,0,0,3"/>
                <TextBox Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
						 MinWidth="100" 
						 Margin="0,0,0,3"/>
                <Button Content="Search" 
						Command="{Binding SearchCommand}" 
						Margin="0,3,0,0"/>
            </StackPanel>
        </Border>

        <!-- Search Result -->
        <Border Grid.Row="3" Background="White" BorderBrush="Gray" BorderThickness="1" Margin="5">
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Text="Search Result" FontSize="12" Margin="0,0,0,5"/>
                <Border BorderBrush="Gray" BorderThickness="1">
                    <TextBlock Text="{Binding SearchFound}" 
							   VerticalAlignment="Center" 
							   TextAlignment="Center" 
							   Margin="5"
							   TextWrapping="Wrap"
							   MinHeight="40"/>
                </Border>
                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,5,0,5">
                    <TextBlock Text="{Binding SearchResult}"
							   VerticalAlignment="Center" 
							   TextAlignment="Center"
							   Margin="5"/>
                </Border>

            </StackPanel>
        </Border>

        <!-- Average of dataset -->
        <Border Grid.Row="4" Background="White" BorderBrush="Gray" BorderThickness="1" Margin="5">
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Text="Calculated Average" FontSize="12" Margin="0,0,0,5"/>
                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,5,0,5">
                    <TextBlock Text="{Binding DataSetAverage, Mode=OneWay, StringFormat=F2}" 
							   VerticalAlignment="Center" 
							   TextAlignment="Center" 
							   Margin="5"/>
                </Border>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
